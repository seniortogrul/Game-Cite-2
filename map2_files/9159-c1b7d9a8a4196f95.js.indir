!function(){try{var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new n.Error).stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="c5f09c84-12e5-4eab-b9f7-ff6b2d0bcbc7",n._sentryDebugIdIdentifier="sentry-dbid-c5f09c84-12e5-4eab-b9f7-ff6b2d0bcbc7")}catch(n){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9159],{41468:function(n,e,l){l.d(e,{Kl:function(){return b},LI:function(){return a},Qo:function(){return t},yP:function(){return i}}),l(2935),l(41866),l(11875);var o=l(22319),a=(0,o.c)({defaultClassName:"_bglng85 _1286nb12ji _1286nb129i _1286nb1246 _1286nb12e6 _1286nb14l0 _1286nb14mc _1286nb14no _1286nb14p0 _1286nb12s0 _1286nb12oo _1286nb13q6 _1286nb119",variantClassNames:{mode:{follow:"_bglng82 _1286nb16iv _1286nb181m _1286nb187j",following:"_bglng84 _1286nb16iv _1286nb16qj _1286nb181m _1286nb18fa"}},defaultVariants:{mode:"follow"},compoundVariants:[]}),t=(0,o.c)({defaultClassName:"_bglng8e _bglng89 _1286nb119",variantClassNames:{mode:{follow:"_bglng8b _1286nb16iv",following:"_bglng8d _1286nb16iv _1286nb16qj"}},defaultVariants:{mode:"follow"},compoundVariants:[]}),b=(0,o.c)({defaultClassName:"_bglng8m _1286nb12jc _1286nb129c _1286nb1240 _1286nb12e0 _1286nb14gi _1286nb14hi _1286nb14ii _1286nb14ji _1286nb14ku _1286nb14m6 _1286nb14ni _1286nb14ou _1286nb12t0 _1286nb12s0 _1286nb1528 _1286nb119 _1286nb12rc",variantClassNames:{mode:{follow:"_bglng8j _1286nb16w4",following:"_bglng8l _1286nb16w4"}},defaultVariants:{mode:"follow"},compoundVariants:[]}),i="_bglng8p"},79159:function(n,e,l){l.d(e,{j:function(){return v}});var o=l(97458),a=l(32748),t=l(41468),b=l(96005),i=l(42011),r=l(17417),s=l(7616),_=l(52983);let c=async()=>{let n=await fetch("/api/social/follow");if(!n.ok)throw Error();return await n.json()};var f=l(41843),u=l(24399),d=l(73139);let g=(0,u.cn)([]),w=(0,d.xu)(n=>(0,u.cn)(e=>!!e(f.PQ)&&e(g).includes(n),(e,l,o)=>{l(g,e=>o?e.filter(e=>e!==n):[...e,n])})),m=async(n,e)=>{if(!(await fetch("/api/social/follow?id=".concat(e),{method:n?"DELETE":"PUT"})).ok)throw Error("There was a problem toggling the follow")};var h=l(62168);let y=(n,e)=>{let l=(0,h.PN)(),o={event:"ga4event",event_name:"follow_author",action:"follow_author",author_name:n,location:e,category:"follow-contributor"};return()=>l(o)},p=(n,e,l)=>{let[o,a]=(0,_.useState)(!0),{openToast:t}=(0,r.x_)(),{loginUrl:f,setLoginCookies:u}=(0,b.J)(),d=(0,i.d)(),h=(0,s.b9)(g),[p,v]=(0,s.KO)(w(n)),j=y(e,l);(0,_.useEffect)(()=>{(async()=>{if(!d){h([]);return}let n=async()=>await c();h(await n())})()},[h,d]);let N=(0,_.useCallback)(()=>{if(!d){u(),window.location.href=f;return}a(!1),m(p,n).then(()=>v(p)).then(()=>!p&&j()).catch(()=>t()).finally(()=>a(!0))},[d,p,n,u,f,v,j,t]);return{following:p,disabled:!o,onClick:N}},v=n=>{let{id:e,name:l,location:b,buttonStyle:i="button"}=n,{t:r}=(0,a.$G)("common"),{following:s,onClick:_,disabled:c}=p(e,l,b),f={inline:t.Qo,outline:t.Kl,button:t.LI};return s?(0,o.jsxs)("button",{className:f[i]({mode:"following"}),onClick:_,disabled:c,children:[(0,o.jsx)("span",{className:t.yP,children:r("following")}),(0,o.jsx)("span",{className:t.yP,children:r("unfollow")})]}):(0,o.jsx)("button",{className:f[i]({mode:"follow"}),onClick:_,disabled:c,children:r("follow")})}}}]);